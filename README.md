This project was made to calculate non-revenue water in metered areas for the Water Authority of Dickson County. In order to do this, it was necessary to write code to incorporate data from three separate systems to create a mass balance of all the water entering and exiting the areas included in the study. The three systems in question are High Tide Technologies SCADA, Beacon which is where data for customer meters is stored, and WADC's GIS which is serving as the database. 

First and foremost, it was necessary to implement the API for High Tide's SCADA in order to get data from the meters monitoring pump flows and the zone meters which monitor water flow between zones. This data was important to have first as there are resources for estimating customer flow data based on averages determined by other bodies. Within the high tide functions file you can view how the data is organized. This is specific to WADC's High Tide pages. It should also be noted that not all functions 
located in this file are relevant to this particular project since High Tide has data from other metering equipment that WADC interacts with.

The Beacon api functions again is where access to the customer usage is located. Some things to note about this: the easiest way to query for data was by route number since I needed data for a specific area, this API was also rate limited meaning that I had to do some major working around this limitation which you can see in the code.

Throughout all files, the ArcGIS API is utilized. Our Enterprise server is what I used to store all data. The data for all meters is stored in separate feature tables. These SQL styled tables are important for the actual analysis as they can be queried on fields and geospatial relationships since the data is related to points on a map. This makes for easy analysis on data for the area of interest.

Finally all the data is put together by performing a mass balance of water flowing into and out of the specified areas. Taking the difference in water into the zones and water exiting the zones gives the non-revenue water for the zone for that hour. This value along with a correction of unavoidable real losses yields the preventable NRW and the percentage of flow that is non-revenue.

Caveats of this system include that the beacon service can only at most collect data every 6 hours due to battery limitations on AMI meters, daily flows are only possible in areas with AMI metering, it's also necessary to have the appropriate login information and API keys to utilize any of the API functions presented here. 
